<!doctype html> <html lang=ja > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <script src="/libs/main.js"></script> <link rel=stylesheet  href="/css/reboot.css"> <link rel=stylesheet  href="/css/main.css"> <link rel=icon  href="/assets/favicon.png"> <title>型</title> <style> span.name { color: #50b949; font-family: Cica } </style> <div class=sidebar > <div class="container sidebar-sticky"> <div class=sidebar-about > <div class=top >JCS</div> <div class=lead >Julia Cheat Site.</div> </div> <nav class=sidebar-nav > <ul class=menu-list > <li class=menu-parent ><a href="/" class=menu-link >トップ</a> <li class="menu-parent active"><a href="/manual/getting-started/" class=menu-link >マニュアル</a> <ul class=menu-child > <li><a class="" href="/manual/getting-started/">はじめる</a> <li><a class="" href="/manual/variables/">変数</a> <li><a class="" href="/manual/int-and-float/">整数と浮動小数点数</a> <li><a class="" href="/manual/operations/">数理演算と初歩的な関数</a> <li><a class="" href="/manual/complex-and-rational/">複素数と有理数</a> <li><a class="" href="/manual/strings/">文字列</a> <li><a class="" href="/manual/functions/">関数</a> <li><a class="" href="/manual/control-flow/">制御構造</a> <li><a class="" href="/manual/scope/">スコープ</a> <li><a class=active  href="/manual/type/">型</a> </ul> <!-- <li class="menu-parent {{ispage base/*}}active{{end}}"><a href="/base/essentials/" class=menu-link >Base</a> <ul class=menu-child > {{for p in base}} <li><a class="{{ispage {{p}}}}active{{end}}" href="/{{fill p}}/">{{fill title p}}</a> {{end}} </ul> <li class="menu-parent {{ispage omake/*}}active{{end}}"><a href="/omake/Cascadia.jl/" class=menu-link >おまけ</a> <ul class=menu-child > {{for p in omake}} <li><a class="{{ispage {{p}}}}active{{end}}" href="/{{fill p}}/">{{fill title p}}</a> {{end}} </ul> --> </ul> </nav> </div> </div> <div class="content container"> <header> <div class=sidebar-button  onclick="toggle()"> <div class=bar1 ></div> <div class=bar2 ></div> <div class=bar3 ></div> </div> </header> <div class=franklin-content ><h1 id="型"><a href="#型">型</a></h1> <p>-値の分類-</p> <p>値を扱う上で型は避けて通れない。Juliaには型をあまり気にせず済む工夫がされているが、型の知識が必要になることもある。</p> <div class=franklin-toc ><ol><li><a href="#構造ごとのスコープ">構造ごとのスコープ</a><li><a href="#グローバルスコープ">グローバルスコープ</a><li><a href="#ローカルスコープ">ローカルスコープ</a><ol><li><a href="#letブロック"><code>Let</code>ブロック</a><li><a href="#ループにおけるスコープ">ループにおけるスコープ</a><li><a href="#定数">定数</a></ol></ol></div> <h2 id="型とは"><a href="#型とは">型とは</a></h2> <p>ざっくり言えば値の種類。<code>1</code>は整数型の値で<code>&quot;こんにちは&quot;</code>は文字列型の値だ。大きく分けると次のようになる。</p> <ul> <li><p>抽象型 &#40;Abstract&#41;</p> <li><p>プリミティブ型 &#40;Primitive&#41;</p> <li><p>複合型 &#40;Composite&#41;</p> </ul> <h2 id="型を宣言する"><a href="#型を宣言する">型を宣言する</a></h2> <h3 id="型断定_assertion"><a href="#型断定_assertion">型断定 &#40;assertion&#41;</a></h3> <p><code>::</code>演算子でコード内の値に型の情報を注釈として付与すると、場合によっては</p> <ul> <li><p>型由来の予期せぬエラーを回避できる</p> <li><p>コンパイラが吐くコードが高速化する</p> </ul> <p>対象の値が断定した型で表現できなければエラー</p> <pre><code class="julia-repl hljs"><span class=hljs-meta >julia&gt;</span><span class=julia > (<span class=hljs-number >1</span>+<span class=hljs-number >2</span>)::<span class=hljs-built_in >Int</span>
</span>3

<span class=hljs-meta >julia&gt;</span><span class=julia > (<span class=hljs-number >1</span>+<span class=hljs-number >2</span>)::<span class=hljs-built_in >AbstractFloat</span>
</span>ERROR: TypeError: in typeassert, expected AbstractFloat, got a value of type Int64

<span class=hljs-meta >julia&gt;</span><span class=julia > x = <span class=hljs-number >1.0</span>
</span>1.0

<span class=hljs-meta >julia&gt;</span><span class=julia > (x+<span class=hljs-number >2</span>)::<span class=hljs-built_in >AbstractFloat</span>
</span>3.0</code></pre> <h3 id="型宣言_declaration"><a href="#型宣言_declaration">型宣言 &#40;declaration&#41;</a></h3> <p>代入式や<code>local</code>変数宣言において<code>::</code>をつける場合は挙動が異なり、指定した型になるよう<code>convert</code>関数で変換を試みる。ただしグローバル変数に対しては不可。</p> <pre><code class="julia hljs"><span class=hljs-keyword >function</span> foo(n)
	x::<span class=hljs-built_in >Int8</span> = n
	y = n
	z::<span class=hljs-built_in >Float64</span> = n
	<span class=hljs-keyword >return</span> x, y, z
<span class=hljs-keyword >end</span>

a, b, c = foo(<span class=hljs-number >100</span>)

typeof(a)   <span class=hljs-comment ># -&gt; Int8</span>
typeof(b)   <span class=hljs-comment ># -&gt; Int64</span>
typeof(c)   <span class=hljs-comment ># -&gt; Float64</span></code></pre> <h2 id=tips ><a href="#tips">Tips</a></h2> <h3 id="型宣言"><a href="#型宣言">型宣言</a></h3> <p><code>::</code>演算子でコード内の値に型の情報を注釈として付与すると、場合によっては</p> <ul> <li><p>値の型を明示することで型由来の予期せぬエラーを回避できる</p> <li><p>コンパイラが吐くコードが高速化する</p> </ul> <div class=page-foot > <div class=copyright > &copy; okshouiti. 最終更新: 0001-01-01. <small>built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a></small>. </div> </div> </div> </div>